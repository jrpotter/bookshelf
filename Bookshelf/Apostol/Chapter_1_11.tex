\documentclass{article}

\input{../../preamble}

\newcommand{\lean}[1]{\href
  {./Chapter\_1\_11.html\#Apostol.Chapter\_1\_11.#1}
  {Apostol.Chapter\_1\_11.#1}}

\begin{document}

\header{Exercises 1.11}{Tom M. Apostol}

\section*{Exercise 4}%
\hyperlabel{sec:exercise-4}%

Prove that the greatest-integer function has the properties indicated:

\subsection*{\proceeding{Exercise 4a}}%
\hyperlabel{sub:exercise-4a}%

$\floor{x + n} = \floor{x} + n$ for every integer $n$.

\begin{proof}

  \lean{exercise\_4a}

\end{proof}

\subsection*{\proceeding{Exercise 4b}}%
\hyperlabel{sub:exercise-4b}%

$\floor{-x} =
  \begin{cases}
    -\floor{x} & \text{if } x \text{ is an integer}, \\
    -\floor{x} - 1 & \text{otherwise}.
  \end{cases}$

\begin{proof}

  \  % Force space prior to *Proof.*

  \begin{enumerate}[(a)]
    \item \lean{exercise\_4b\_1}
    \item \lean{exercise\_4b\_2}
  \end{enumerate}

\end{proof}

\subsection*{\proceeding{Exercise 4c}}%
\hyperlabel{sub:exercise-4c}%

$\floor{x + y} = \floor{x} + \floor{y}$ or $\floor{x} + \floor{y} + 1$.

\begin{proof}

  \lean{exercise\_4c}

\end{proof}

\subsection*{\proceeding{Exercise 4d}}%
\hyperlabel{sub:exercise-4d}%

$\floor{2x} = \floor{x} + \floor{x + \frac{1}{2}}.$

\begin{proof}

  \lean{exercise\_4d}

\end{proof}

\subsection*{\proceeding{Exercise 4e}}%
\hyperlabel{sub:exercise-4e}%

$\floor{3x} = \floor{x} + \floor{x + \frac{1}{3}} + \floor{x + \frac{2}{3}}.$

\begin{proof}

  \lean{exercise\_4e}

\end{proof}

\section*{\proceeding{Exercise 5}}%
\hyperlabel{sec:exercise-5}%

The formulas in Exercises 4(d) and 4(e) suggest a generalization for
  $\floor{nx}$.
State and prove such a generalization.

\note{The stated generalization is known as "Hermite's Identity."}

\begin{proof}

  \lean{exercise\_5}

  \divider

  We prove that for all natural numbers $n$ and real numbers $x$, the following
    identity holds:
    \begin{equation}
      \label{sec:exercise-5-eq1}
      \floor{nx} = \sum_{i=0}^{n-1} \floor{x + \frac{i}{n}}
    \end{equation}
  By definition of the floor function, $x = \floor{x} + r$ for some
    $r \in \ico{0}{1}$.
  Define $S$ as the partition of non-overlapping subintervals
    $$\ico{0}{\frac{1}{n}}, \ico{\frac{1}{n}}{\frac{2}{n}}, \ldots,
      \ico{\frac{n-1}{n}}{1}.$$
  By construction, $\cup\; S = \ico{0}{1}$.
  Therefore there exists some $j \in \mathbb{N}$ such that
    \begin{equation}
      \label{sec:exercise-5-eq2}
      r \in \ico{\frac{j}{n}}{\frac{j+1}{n}}.
    \end{equation}
  With these definitions established, we now show the left- and right-hand sides
    of \eqref{sec:exercise-5-eq1} evaluate to the same number.

  \paragraph{Left-Hand Side}%

    Consider the left-hande side of identity \eqref{sec:exercise-5-eq1}
    By \eqref{sec:exercise-5-eq2}, $nr \in \ico{j}{j + 1}$.
    Therefore $\floor{nr} = j$.
    Thus
      \begin{align}
        \floor{nx}
          & = \floor{n(\floor{x} + r)} \nonumber \\
          & = \floor{n\floor{x} + nr} \nonumber \\
          & = \floor{n\floor{x}} + \floor{nr}. \nonumber
            & \text{\nameref{sub:exercise-4a}} \\
          & = \floor{n\floor{x}} + j \nonumber \\
          & = n\floor{x} + j. \label{sec:exercise-5-eq3}
      \end{align}

  \paragraph{Right-Hand Side}%

    Now consider the right-hand side of identity \eqref{sec:exercise-5-eq1}.
    We note each summand, by construction, is the floor of $x$ added to a
      nonnegative number less than one.
    Therefore each summand contributes either $\floor{x}$ or $\floor{x} + 1$ to
      the total.
    Letting $z$ denote the number of summands that contribute $\floor{x} + 1$,
      we have
      \begin{equation}
        \label{sec:exercise-5-eq4}
        \sum_{i=0}^{n-1} \floor{x + \frac{i}{n}} = n\floor{x} + z.
      \end{equation}
    The value of $z$ corresponds to the number of indices $i$ that satisfy
      $$\frac{i}{n} \geq 1 - r.$$
    By \eqref{sec:exercise-5-eq2}, it follows
      \begin{align*}
        1 - r
          & \in \ioc{1 - \frac{j+1}{n}}{1-\frac{j}{n}} \\
          & = \ioc{\frac{n - j - 1}{n}}{\frac{n - j}{n}}.
      \end{align*}
    Thus we can determine the value of $z$ by instead counting the number of
      indices $i$ that satisfy $$\frac{i}{n} \geq \frac{n - j}{n}.$$
    Rearranging terms, we see that $i \geq n - j$ holds for
      $z = (n - 1) - (n - j) + 1 = j$ of the $n$ summands.
    Substituting the value of $z$ into \eqref{sec:exercise-5-eq4} yields
      \begin{equation}
        \label{sec:exercise-5-eq5}
        \sum_{i=0}^{n-1} \floor{x + \frac{i}{n}} = n\floor{x} + j.
      \end{equation}

  \paragraph{Conclusion}%

    Since \eqref{sec:exercise-5-eq3} and \eqref{sec:exercise-5-eq5} agree with
    one another, it follows identity \eqref{sec:exercise-5-eq1} holds.

\end{proof}

\section*{\unverified{Exercise 6}}%
\hyperlabel{sec:exercise-6}%

Recall that a lattice point $(x, y)$ in the plane is one whose coordinates are
  integers.
Let $f$ be a nonnegative function whose domain is the interval $[a, b]$, where
  $a$ and $b$ are integers, $a < b$.
Let $S$ denote the set of points $(x, y)$ satisfying $a \leq x \leq b$,
  $0 < y \leq f(x)$.
Prove that the number of lattice points in $S$ is equal to the sum
  $$\sum_{n=a}^b \floor{f(n)}.$$

\begin{proof}

  Define $S_i = \mathbb{Z} \cap \ioc{0}{f(i)}$ for all $i \in \mathbb{Z}$.
  By definition, the set of lattice points of $S$ is given by
    $$L = \{ (i, j) : i = a, \ldots, b \land j \in S_i \}.$$
  By construction, it follows $$\sum_{j \in S_i} 1 = \floor{f(i)}.$$
  Therefore $$\abs{L}
    = \sum_{i=a}^b \sum_{j \in S_i} 1
    = \sum_{i=1}^b \floor{f(i)}.$$

\end{proof}

\section*{Exercise 7}%
\hyperlabel{sec:exercise-7}%

If $a$ and $b$ are positive integers with no common factor, we have the formula
  $$\sum_{n=1}^{b-1} \floor{\frac{na}{b}} = \frac{(a - 1)(b - 1)}{2}.$$
When $b = 1$, the sum on the left is understood to be $0$.

\subsection*{\unverified{Exercise 7a}}%
\hyperlabel{sub:exercise-7a}%

Derive this result by a geometric argument, counting lattice points in a right
  triangle.

\begin{proof}

  TODO

\end{proof}

\subsection*{\proceeding{Exercise 7b}}%
\hyperlabel{sub:exercise-7b}%

Derive the result analytically as follows:
By changing the index of summation, note that
  $\sum_{n=1}^{b-1} \floor{na / b} = \sum_{n=1}^{b-1} \floor{a(b - n) / b}$.
Now apply Exercises 4(a) and (b) to the bracket on the right.

\begin{proof}

  \lean{exercise\_7b}

\end{proof}

\section*{\unverified{Exercise 8}}%
\hyperlabel{sec:exercise-8}%

Let $S$ be a set of points on the real line.
The \textit{characteristic function} of $S$ is, by definition, the function
  $\chi_S$ such that $\chi_S(x) = 1$ for every $x$ in $S$, and $\chi_S(x) = 0$
  for those $x$ not in $S$.
Let $f$ be a step function which takes the constant value $c_k$ on the $k$th
  open subinterval $I_k$ of some partition of an interval $[a, b]$.
Prove that for each $x$ in the union $I_1 \cup I_2 \cup \cdots \cup I_n$ we have
  $$f(x) = \sum_{k=1}^n c_k\chi_{I_k}(x).$$
This property is described by saying that every step function is a linear
  combination of characteristic functions of intervals.

\begin{proof}

  TODO

\end{proof}

\end{document}
